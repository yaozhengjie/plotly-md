3.5　多个坐标轴

有时，一幅图中多个图表的数值可能会相差很大，这样会导致数值较小的图表对坐标轴的变化不是很敏感，不能很好地体现图表的变化规律。因此，在绘图时就有多个坐标轴的需求。

### 3.5.1　双坐标轴

最简单的多个坐标轴就是双坐标轴了。使用 Plotly绘制双坐标轴非常容易，本案例见文件multi_yaxis.py，代码如下。

![img](https://cdn.nlark.com/yuque/0/2022/jpeg/21473765/1644303439183-83d1a11a-ce62-43d6-9e6b-09e544c45b46.jpeg)

![img](https://cdn.nlark.com/yuque/0/2022/jpeg/21473765/1644303439717-695d3e77-1540-4f66-8231-4dfce55bac28.jpeg)

代码运行结果如图3-15所示。

![img](https://cdn.nlark.com/yuque/0/2022/jpeg/21473765/1644303440247-a33495ad-eb14-4b81-859e-e44524a7dc34.jpeg)

图3-15　代码运行结果

在上面的代码中，比较关键的是下面几行代码：

![img](https://cdn.nlark.com/yuque/0/2022/jpeg/21473765/1644303440839-e1ee78f8-e420-4439-a4b0-1eac94eae889.jpeg)

titlefont用于设置标题格式，这里设置了yaxis2的标题颜色。

tickfont用于设置刻度格式，这里设置了yaxis2的刻度颜色。

overlaying是覆盖的意思，可以是"free"、"/^x([2-9]|[1-9][0-9]+)?$/"、"/^y([2-9]|[1-9][0-9]+)?$/"中的一种，本案例中参数为y，表示会覆盖y轴。

side的参数为 top、bottom、left、right中的一种，表示坐标轴的位置。本案例中为right，表示右坐标轴，即yaxis2为右坐标轴。

### 3.5.2　多坐标轴

相对于双坐标轴，Plotly更让人激动的是可以实现多坐标轴的效果，比如 3坐标轴、4坐标轴。这些坐标轴都是在二维平面上实现的，绘制方法也很简单，代码如下（见文件multi_yaxis2.py）。

![img](https://cdn.nlark.com/yuque/0/2022/jpeg/21473765/1644303441229-368b0a43-7f02-4bc0-aed0-f62fd056063f.jpeg)

![img](https://cdn.nlark.com/yuque/0/2022/jpeg/21473765/1644303441728-4d2296e2-5b24-4b56-a581-230ff4203b53.jpeg)

![img](https://cdn.nlark.com/yuque/0/2022/jpeg/21473765/1644303442290-3afb7472-9747-43e9-a0a2-7271128451f5.jpeg)

代码运行结果如图3-16所示。

![img](https://cdn.nlark.com/yuque/0/2022/jpeg/21473765/1644303442854-0679ecdd-d2bb-4eff-94c8-6fc143bab292.jpeg)

图3-16　代码运行结果

可以看到，不同的坐标轴有不同的刻度及不同的颜色，很容易区分。

从代码上来看，实现上面的效果比较重要的是下面的几行代码。

![img](https://cdn.nlark.com/yuque/0/2022/jpeg/21473765/1644303443318-ac471ab9-5eb3-4de0-a8fd-ee6c82804fac.jpeg)

anchor的取值可以是 free、"/^x([2-9]|[1-9][0-9]+)?$/"、"/^y([2-9]|[1-9][0-9]+)?$/"，表示需要绑定的坐标轴。如果设置为 free，则其坐标轴由 position的值指定，这里position=0.15表示在0.15这个位置的轴就是yaxis2所在的轴。

position用来指定轴的位置，仅在anchor='free'时该值有效。

### 3.5.3　共享坐标轴

有时会遇到这样的情况，X轴的几个子图数值相差不大，Y轴的几个子图数值相差较大，虽然可以像上例一样设置多个坐标轴，但是更想在一个坐标轴上呈现，所以就涉及到共享Y轴。本案例的代码如下（见文件multi_share_yaxes.py）。

![img](https://cdn.nlark.com/yuque/0/2022/jpeg/21473765/1644303443714-ac1a584b-9616-4802-92a5-39a07788add2.jpeg)

![img](https://cdn.nlark.com/yuque/0/2022/jpeg/21473765/1644303444362-aa7ad59f-b257-481d-a39e-fc25cb9bc0b4.jpeg)

代码运行结果如图3-17所示。

![img](https://cdn.nlark.com/yuque/0/2022/jpeg/21473765/1644303444958-9e11cbe2-ff48-4bbd-abd0-8367abcec196.jpeg)

图3-17　代码运行结果

从图3-17中可以看到，在一个图里呈现出了三个不同数字区域的图形。本案例主要用到了如下参数：

domain=[0.66, 1]

domain参数用来指定坐标轴的区间范围，这里的设置为[0.66, 1]，表示 yaxis3的区间为0.66～1，所呈现出的结果为最上面的一条线。

可见，所谓共享Y坐标轴，是指不同的图表对整幅图在Y轴上的区域分割。
