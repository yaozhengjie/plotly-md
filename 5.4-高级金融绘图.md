5.4　高级金融绘图

前面讲解了手工添加技术指标的方法，这种方法比较笨，虽然可以利用talib等技术指标的专业模块来搞定这些问题，可是对于新手来说还是比较困难的。幸运的是，cufflinks开发团队已经帮我们解决了这个问题：从cufflinks的v0.11版本开始，增加了QuantFig函数，使用这个函数能让金融绘图更加方便。

### 5.4.1　入门案例

QuantFig函数的使用非常简单，与一般cufflinks函数的使用方法相比，只加了一行代码，见文件“高级金融绘图.ipynb（ 5.4.1 入门案例）”，代码如下。

![img](https://cdn.nlark.com/yuque/0/2022/jpeg/21473765/1644303509596-15f1113a-0659-468e-9e6c-182ba6853da9.jpeg)

绘图结果如图5-13所示。

![img](https://cdn.nlark.com/yuque/0/2022/jpeg/21473765/1644303510010-d74a5c34-d06e-4d83-9f04-919de9f16f0d.jpeg)

图5-13　高级金融绘图结果

从绘图结果可以看出，我们以很简单的方式绘制了K线图并在K线图上添加了布林线。

这个案例的关键代码是下面这一行：

qf=cf.QuantFig(df,title='高级金融绘图',legend='top',name='QF')

这行代码的作用是把传统的DataFrame对象转换成QuantFig对象，从而方便我们绘图。

### 5.4.2　综合案例

在实际工作中，要添加更多的指标也非常简单，见文件“高级金融绘图.ipynb（5.4.2 综合案例）”，代码如下。

![img](https://cdn.nlark.com/yuque/0/2022/jpeg/21473765/1644303510362-1f896384-bf2e-46f2-94f1-600a3e9d74c0.jpeg)

![img](https://cdn.nlark.com/yuque/0/2022/jpeg/21473765/1644303510706-6015c7eb-35e3-481d-bf51-06422f91cd7d.jpeg)

绘图结果如图5-14所示。

![img](https://cdn.nlark.com/yuque/0/2022/jpeg/21473765/1644303511061-cdd7d62c-3fef-4952-999e-e09380f790c1.jpeg)

图5-14　添加更多指标的高级金融绘图结果

由此可见，我们通过简单的几行代码就创建了 K线图的多种技术指标，如MACD、RSI、布林线等。这些指标都在 QuantFig中封装好了，我们只需要调用就可以了。QuantFig函数还能自动添加子图，总体效果看起来非常不错。
